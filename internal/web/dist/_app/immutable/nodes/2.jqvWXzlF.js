import{s as Sl,d as i,a as P,l as n,i as x,b as l,c as d,e as _,f as D,g as w,h as c,t as V,j as y,J as Bl,C as ql,D as zl,E as Rl,F as $l,m as Fl,p as Ql,n as Qe,o as R,B as Ml,x as xt,y as St}from"../chunks/CVjQFEho.js";import{S as Nl,i as Hl,t as G,a as $,g as Ll,c as Tl,d as ze,m as Re,b as $e,e as Fe}from"../chunks/OdZnOW3T.js";import{g as Gl,a as Ol,k as Yl,f as N,d as It,b as Jl}from"../chunks/DXV66Os-.js";import{G as Ul}from"../chunks/DlDG5wvu.js";import{Q as Wl}from"../chunks/y-cuSnRl.js";function Al(s){let e,t,a=s[8][s[4]]+"",r,u,p,f,h;return{c(){e=c("span"),t=c("span"),r=V(a),u=y(),p=c("span"),f=V(s[5]),this.h()},l(m){e=d(m,"SPAN",{class:!0});var k=_(e);t=d(k,"SPAN",{});var M=_(t);r=D(M,a),M.forEach(i),u=w(k),p=d(k,"SPAN",{});var H=_(p);f=D(H,s[5]),H.forEach(i),k.forEach(i),this.h()},h(){n(e,"class",h="flex items-center gap-1 text-xs "+(s[4]==="up"?"text-gauge-red":s[4]==="down"?"text-gauge-green":"text-carbon-400"))},m(m,k){x(m,e,k),l(e,t),l(t,r),l(e,u),l(e,p),l(p,f)},p(m,k){k&16&&a!==(a=m[8][m[4]]+"")&&P(r,a),k&32&&P(f,m[5]),k&16&&h!==(h="flex items-center gap-1 text-xs "+(m[4]==="up"?"text-gauge-red":m[4]==="down"?"text-gauge-green":"text-carbon-400"))&&n(e,"class",h)},d(m){m&&i(e)}}}function jl(s){let e,t;return{c(){e=c("span"),t=V(s[2]),this.h()},l(a){e=d(a,"SPAN",{class:!0});var r=_(e);t=D(r,s[2]),r.forEach(i),this.h()},h(){n(e,"class","number-unit")},m(a,r){x(a,e,r),l(e,t)},p(a,r){r&4&&P(t,a[2])},d(a){a&&i(e)}}}function Il(s){let e,t;return{c(){e=c("p"),t=V(s[3]),this.h()},l(a){e=d(a,"P",{class:!0});var r=_(e);t=D(r,s[3]),r.forEach(i),this.h()},h(){n(e,"class","mt-2 text-sm text-carbon-500")},m(a,r){x(a,e,r),l(e,t)},p(a,r){r&8&&P(t,a[3])},d(a){a&&i(e)}}}function Pl(s){let e,t;const a=s[11].default,r=ql(a,s,s[10],null);return{c(){e=c("div"),r&&r.c(),this.h()},l(u){e=d(u,"DIV",{class:!0});var p=_(e);r&&r.l(p),p.forEach(i),this.h()},h(){n(e,"class","mt-4")},m(u,p){x(u,e,p),r&&r.m(e,null),t=!0},p(u,p){r&&r.p&&(!t||p&1024)&&zl(r,a,u,u[10],t?$l(a,u[10],p,null):Rl(u[10]),null)},i(u){t||($(r,u),t=!0)},o(u){G(r,u),t=!1},d(u){u&&i(e),r&&r.d(u)}}}function Kl(s){let e,t,a,r,u,p,f,h,m,k,M,H,T,j,E=s[4]&&Al(s),A=s[2]&&jl(s),I=s[3]&&Il(s),v=s[9].default&&Pl(s);return{c(){e=c("div"),t=c("div"),a=c("h3"),r=V(s[0]),u=y(),E&&E.c(),p=y(),f=c("div"),h=c("span"),m=V(s[1]),M=y(),A&&A.c(),H=y(),I&&I.c(),T=y(),v&&v.c(),this.h()},l(b){e=d(b,"DIV",{class:!0});var C=_(e);t=d(C,"DIV",{class:!0});var q=_(t);a=d(q,"H3",{class:!0});var J=_(a);r=D(J,s[0]),J.forEach(i),u=w(q),E&&E.l(q),q.forEach(i),p=w(C),f=d(C,"DIV",{class:!0});var L=_(f);h=d(L,"SPAN",{class:!0});var F=_(h);m=D(F,s[1]),F.forEach(i),M=w(L),A&&A.l(L),L.forEach(i),H=w(C),I&&I.l(C),T=w(C),v&&v.l(C),C.forEach(i),this.h()},h(){n(a,"class","text-sm font-medium text-carbon-400"),n(t,"class","flex items-start justify-between mb-3"),n(h,"class",k="number-display "+s[7][s[6]]),n(f,"class","flex items-baseline gap-1"),n(e,"class","card animate-slide-up")},m(b,C){x(b,e,C),l(e,t),l(t,a),l(a,r),l(t,u),E&&E.m(t,null),l(e,p),l(e,f),l(f,h),l(h,m),l(f,M),A&&A.m(f,null),l(e,H),I&&I.m(e,null),l(e,T),v&&v.m(e,null),j=!0},p(b,[C]){(!j||C&1)&&P(r,b[0]),b[4]?E?E.p(b,C):(E=Al(b),E.c(),E.m(t,null)):E&&(E.d(1),E=null),(!j||C&2)&&P(m,b[1]),(!j||C&64&&k!==(k="number-display "+b[7][b[6]]))&&n(h,"class",k),b[2]?A?A.p(b,C):(A=jl(b),A.c(),A.m(f,null)):A&&(A.d(1),A=null),b[3]?I?I.p(b,C):(I=Il(b),I.c(),I.m(e,T)):I&&(I.d(1),I=null),b[9].default?v?(v.p(b,C),C&512&&$(v,1)):(v=Pl(b),v.c(),$(v,1),v.m(e,null)):v&&(Ll(),G(v,1,1,()=>{v=null}),Tl())},i(b){j||($(v),j=!0)},o(b){G(v),j=!1},d(b){b&&i(e),E&&E.d(),A&&A.d(),I&&I.d(),v&&v.d()}}}function Xl(s,e,t){let{$$slots:a={},$$scope:r}=e;const u=Bl(a);let{title:p}=e,{value:f}=e,{unit:h=""}=e,{subtitle:m=""}=e,{trend:k=null}=e,{trendValue:M=""}=e,{color:H="default"}=e;const T={default:"text-carbon-100",green:"text-gauge-green",amber:"text-gauge-amber",red:"text-gauge-red"},j={up:"↑",down:"↓",neutral:"→"};return s.$$set=E=>{"title"in E&&t(0,p=E.title),"value"in E&&t(1,f=E.value),"unit"in E&&t(2,h=E.unit),"subtitle"in E&&t(3,m=E.subtitle),"trend"in E&&t(4,k=E.trend),"trendValue"in E&&t(5,M=E.trendValue),"color"in E&&t(6,H=E.color),"$$scope"in E&&t(10,r=E.$$scope)},[p,f,h,m,k,M,H,T,j,u,r,a]}class Pt extends Nl{constructor(e){super(),Hl(this,e,Xl,Kl,Sl,{title:0,value:1,unit:2,subtitle:3,trend:4,trendValue:5,color:6})}}function Zl(s){let e;return{c(){e=V("Dashboard")},l(t){e=D(t,"Dashboard")},m(t,a){x(t,e,a)},p:Qe,d(t){t&&i(e)}}}function ea(s){let e=(s[0].vehicle||s[0].id)+"",t;return{c(){t=V(e)},l(a){t=D(a,e)},m(a,r){x(a,t,r)},p(a,r){r&1&&e!==(e=(a[0].vehicle||a[0].id)+"")&&P(t,e)},d(a){a&&i(t)}}}function ta(s){var kl,El;let e,t,a,r,u,p,f,h=((kl=s[5])==null?void 0:kl.icon)+"",m,k,M,H=s[0].delta>0?"+":"",T,j=N(Math.round(s[0].delta))+"",E,A,I,v,b,C=((El=s[5])==null?void 0:El.label)+"",q,J,L,F,Nt,te,Ht,le,Lt,ae,at,U,se,be,cl=`<svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
					Year Remaining`,Tt,O,ne,ke,fl="Days left",Bt,Se,Ge=s[0].days_left_year+"",st,qt,re,Ee,_l="Miles available",zt,Ne,Oe=N(Math.round(s[0].miles_left_year))+"",nt,Rt,He,we,$t,ie,ye,vl=`<svg class="w-5 h-5 text-accent-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
					Term Remaining`,Ft,Y,oe,De,hl="Time left",Qt,W,Ye=s[0].years_left_term+"",rt,Gt,Je=s[0].days_left_term+"",it,Ot,Yt,ue,Ve,ml="Miles available",Jt,Le,Ue=N(Math.round(s[0].miles_left_term))+"",ot,Ut,Ce,Wt,We=It(s[0].plan_end)+"",ut,dt,K,Me,pl=`<svg class="w-5 h-5 text-gauge-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
				Year-End Projection`,Kt,de,ce,fe,Xt,Ke=N(s[0].daily_rate,1)+"",ct,Zt,el,X,Xe=N(Math.round(s[0].projected_end))+"",ft,tl,Ae,Ze=s[0].projected_over?"over":"under",_t,ll,vt,al,_e,ht,mt,z,je,gl='<h3 class="text-lg font-semibold text-carbon-100">Quick Add</h3> <a href="/add" class="text-sm text-accent-primary hover:underline">Full form →</a>',sl,ve,nl,et=N(s[0].latest_reading)+"",pt,rl,il,Z,ol,S;a=new Ul({props:{percent:s[0].percent_used,size:220,strokeWidth:14,$$slots:{default:[sa]},$$scope:{ctx:s}}}),F=new Pt({props:{title:"Current Odometer",value:N(s[0].latest_reading),unit:"mi",subtitle:"Last updated "+It(s[0].latest_date)}}),te=new Pt({props:{title:"Allowance Used",value:N(Math.round(s[0].target_today-s[0].start_miles)),unit:"mi",subtitle:"Budget to date"}}),le=new Pt({props:{title:"Daily Rate",value:N(s[0].daily_rate,1),unit:"mi/day",subtitle:"Current pace",color:s[0].daily_rate>s[0].annual_allowance/365?"amber":"green"}}),ae=new Pt({props:{title:"Annual Allowance",value:N(s[0].annual_allowance),unit:"mi",subtitle:N(Math.round(s[0].annual_allowance/365))+" mi/day ideal"}});function bl(o,g){return o[0].projected_over?ra:na}let gt=bl(s),ee=gt(s);Z=new Wl({props:{currentOdometer:s[0].latest_reading}}),Z.$on("add",s[6]);let B=s[3]&&xl();return{c(){e=c("div"),t=c("div"),Fe(a.$$.fragment),r=y(),u=c("div"),p=c("div"),f=c("span"),m=V(h),k=y(),M=c("span"),T=V(H),E=V(j),A=V(" mi"),v=y(),b=c("p"),q=V(C),J=y(),L=c("div"),Fe(F.$$.fragment),Nt=y(),Fe(te.$$.fragment),Ht=y(),Fe(le.$$.fragment),Lt=y(),Fe(ae.$$.fragment),at=y(),U=c("div"),se=c("div"),be=c("h3"),be.innerHTML=cl,Tt=y(),O=c("div"),ne=c("div"),ke=c("span"),ke.textContent=fl,Bt=y(),Se=c("span"),st=V(Ge),qt=y(),re=c("div"),Ee=c("span"),Ee.textContent=_l,zt=y(),Ne=c("span"),nt=V(Oe),Rt=y(),He=c("div"),we=c("div"),$t=y(),ie=c("div"),ye=c("h3"),ye.innerHTML=vl,Ft=y(),Y=c("div"),oe=c("div"),De=c("span"),De.textContent=hl,Qt=y(),W=c("span"),rt=V(Ye),Gt=V("y "),it=V(Je),Ot=V("d"),Yt=y(),ue=c("div"),Ve=c("span"),Ve.textContent=ml,Jt=y(),Le=c("span"),ot=V(Ue),Ut=y(),Ce=c("div"),Wt=V("Plan ends "),ut=V(We),dt=y(),K=c("div"),Me=c("h3"),Me.innerHTML=pl,Kt=y(),de=c("div"),ce=c("div"),fe=c("p"),Xt=V("At your current rate of "),ct=V(Ke),Zt=V(" mi/day:"),el=y(),X=c("p"),ft=V(Xe),tl=V(` mi
						`),Ae=c("span"),_t=V(Ze),ll=V(" allowance"),al=y(),_e=c("div"),ee.c(),mt=y(),z=c("div"),je=c("div"),je.innerHTML=gl,sl=y(),ve=c("p"),nl=V("Add miles to your current odometer ("),pt=V(et),rl=V(" mi)"),il=y(),Fe(Z.$$.fragment),ol=y(),B&&B.c(),this.h()},l(o){e=d(o,"DIV",{class:!0});var g=_(e);t=d(g,"DIV",{class:!0});var he=_(t);$e(a.$$.fragment,he),r=w(he),u=d(he,"DIV",{class:!0});var me=_(u);p=d(me,"DIV",{class:!0});var Ie=_(p);f=d(Ie,"SPAN",{class:!0});var Te=_(f);m=D(Te,h),Te.forEach(i),k=w(Ie),M=d(Ie,"SPAN",{class:!0});var pe=_(M);T=D(pe,H),E=D(pe,j),A=D(pe," mi"),pe.forEach(i),Ie.forEach(i),v=w(me),b=d(me,"P",{class:!0});var tt=_(b);q=D(tt,C),tt.forEach(i),me.forEach(i),he.forEach(i),J=w(g),L=d(g,"DIV",{class:!0});var Q=_(L);$e(F.$$.fragment,Q),Nt=w(Q),$e(te.$$.fragment,Q),Ht=w(Q),$e(le.$$.fragment,Q),Lt=w(Q),$e(ae.$$.fragment,Q),Q.forEach(i),g.forEach(i),at=w(o),U=d(o,"DIV",{class:!0});var Pe=_(U);se=d(Pe,"DIV",{class:!0});var xe=_(se);be=d(xe,"H3",{class:!0,"data-svelte-h":!0}),R(be)!=="svelte-9a1py5"&&(be.innerHTML=cl),Tt=w(xe),O=d(xe,"DIV",{class:!0});var Be=_(O);ne=d(Be,"DIV",{class:!0});var bt=_(ne);ke=d(bt,"SPAN",{class:!0,"data-svelte-h":!0}),R(ke)!=="svelte-1p51e4v"&&(ke.textContent=fl),Bt=w(bt),Se=d(bt,"SPAN",{class:!0});var wl=_(Se);st=D(wl,Ge),wl.forEach(i),bt.forEach(i),qt=w(Be),re=d(Be,"DIV",{class:!0});var kt=_(re);Ee=d(kt,"SPAN",{class:!0,"data-svelte-h":!0}),R(Ee)!=="svelte-1yeoqq4"&&(Ee.textContent=_l),zt=w(kt),Ne=d(kt,"SPAN",{class:!0});var yl=_(Ne);nt=D(yl,Oe),yl.forEach(i),kt.forEach(i),Rt=w(Be),He=d(Be,"DIV",{class:!0});var Dl=_(He);we=d(Dl,"DIV",{class:!0,style:!0}),_(we).forEach(i),Dl.forEach(i),Be.forEach(i),xe.forEach(i),$t=w(Pe),ie=d(Pe,"DIV",{class:!0});var Et=_(ie);ye=d(Et,"H3",{class:!0,"data-svelte-h":!0}),R(ye)!=="svelte-16nr1vf"&&(ye.innerHTML=vl),Ft=w(Et),Y=d(Et,"DIV",{class:!0});var qe=_(Y);oe=d(qe,"DIV",{class:!0});var wt=_(oe);De=d(wt,"SPAN",{class:!0,"data-svelte-h":!0}),R(De)!=="svelte-d017lx"&&(De.textContent=hl),Qt=w(wt),W=d(wt,"SPAN",{class:!0});var lt=_(W);rt=D(lt,Ye),Gt=D(lt,"y "),it=D(lt,Je),Ot=D(lt,"d"),lt.forEach(i),wt.forEach(i),Yt=w(qe),ue=d(qe,"DIV",{class:!0});var yt=_(ue);Ve=d(yt,"SPAN",{class:!0,"data-svelte-h":!0}),R(Ve)!=="svelte-1yeoqq4"&&(Ve.textContent=ml),Jt=w(yt),Le=d(yt,"SPAN",{class:!0});var Vl=_(Le);ot=D(Vl,Ue),Vl.forEach(i),yt.forEach(i),Ut=w(qe),Ce=d(qe,"DIV",{class:!0});var ul=_(Ce);Wt=D(ul,"Plan ends "),ut=D(ul,We),ul.forEach(i),qe.forEach(i),Et.forEach(i),Pe.forEach(i),dt=w(o),K=d(o,"DIV",{class:!0});var Dt=_(K);Me=d(Dt,"H3",{class:!0,"data-svelte-h":!0}),R(Me)!=="svelte-wle49x"&&(Me.innerHTML=pl),Kt=w(Dt),de=d(Dt,"DIV",{class:!0});var Vt=_(de);ce=d(Vt,"DIV",{class:!0});var Ct=_(ce);fe=d(Ct,"P",{class:!0});var Mt=_(fe);Xt=D(Mt,"At your current rate of "),ct=D(Mt,Ke),Zt=D(Mt," mi/day:"),Mt.forEach(i),el=w(Ct),X=d(Ct,"P",{class:!0});var At=_(X);ft=D(At,Xe),tl=D(At,` mi
						`),Ae=d(At,"SPAN",{class:!0});var dl=_(Ae);_t=D(dl,Ze),ll=D(dl," allowance"),dl.forEach(i),At.forEach(i),Ct.forEach(i),al=w(Vt),_e=d(Vt,"DIV",{class:!0});var Cl=_(_e);ee.l(Cl),Cl.forEach(i),Vt.forEach(i),Dt.forEach(i),mt=w(o),z=d(o,"DIV",{class:!0});var ge=_(z);je=d(ge,"DIV",{class:!0,"data-svelte-h":!0}),R(je)!=="svelte-1oen3u3"&&(je.innerHTML=gl),sl=w(ge),ve=d(ge,"P",{class:!0});var jt=_(ve);nl=D(jt,"Add miles to your current odometer ("),pt=D(jt,et),rl=D(jt," mi)"),jt.forEach(i),il=w(ge),$e(Z.$$.fragment,ge),ol=w(ge),B&&B.l(ge),ge.forEach(i),this.h()},h(){var o;n(f,"class","text-2xl"),n(M,"class","font-mono text-xl font-semibold"),n(p,"class",I="flex items-center justify-center gap-2 "+((o=s[5])==null?void 0:o.color)),n(b,"class","text-sm text-carbon-500 mt-1"),n(u,"class","mt-6 text-center"),n(t,"class","lg:col-span-1 card flex flex-col items-center justify-center py-8 animate-slide-up"),n(L,"class","lg:col-span-2 grid grid-cols-2 gap-4"),n(e,"class","grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"),n(be,"class","text-lg font-semibold text-carbon-100 mb-4 flex items-center gap-2"),n(ke,"class","text-carbon-400"),n(Se,"class","font-mono text-2xl text-carbon-100"),n(ne,"class","flex justify-between items-baseline"),n(Ee,"class","text-carbon-400"),n(Ne,"class","font-mono text-2xl text-carbon-100"),n(re,"class","flex justify-between items-baseline"),n(we,"class","h-full bg-gradient-to-r from-accent-primary to-accent-secondary rounded-full transition-all duration-1000"),Ml(we,"width",Math.min(100,(365-s[0].days_left_year)/365*100)+"%"),n(He,"class","h-2 bg-carbon-800 rounded-full overflow-hidden"),n(O,"class","space-y-4"),n(se,"class","card animate-slide-up stagger-2"),n(ye,"class","text-lg font-semibold text-carbon-100 mb-4 flex items-center gap-2"),n(De,"class","text-carbon-400"),n(W,"class","font-mono text-2xl text-carbon-100"),n(oe,"class","flex justify-between items-baseline"),n(Ve,"class","text-carbon-400"),n(Le,"class","font-mono text-2xl text-carbon-100"),n(ue,"class","flex justify-between items-baseline"),n(Ce,"class","text-sm text-carbon-500"),n(Y,"class","space-y-4"),n(ie,"class","card animate-slide-up stagger-3"),n(U,"class","grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"),n(Me,"class","text-lg font-semibold text-carbon-100 mb-4 flex items-center gap-2"),n(fe,"class","text-carbon-400 mb-2"),n(Ae,"class","text-lg"),n(X,"class",vt="text-2xl font-mono "+(s[0].projected_over?"text-gauge-red":"text-gauge-green")),n(ce,"class","flex-1"),n(_e,"class",ht="w-16 h-16 rounded-full flex items-center justify-center "+(s[0].projected_over?"bg-gauge-red/20":"bg-gauge-green/20")),n(de,"class","flex items-center gap-4"),n(K,"class","card animate-slide-up stagger-4 mb-8"),n(je,"class","flex items-center justify-between mb-4"),n(ve,"class","text-carbon-500 text-sm mb-4"),n(z,"class","card animate-slide-up stagger-5")},m(o,g){x(o,e,g),l(e,t),Re(a,t,null),l(t,r),l(t,u),l(u,p),l(p,f),l(f,m),l(p,k),l(p,M),l(M,T),l(M,E),l(M,A),l(u,v),l(u,b),l(b,q),l(e,J),l(e,L),Re(F,L,null),l(L,Nt),Re(te,L,null),l(L,Ht),Re(le,L,null),l(L,Lt),Re(ae,L,null),x(o,at,g),x(o,U,g),l(U,se),l(se,be),l(se,Tt),l(se,O),l(O,ne),l(ne,ke),l(ne,Bt),l(ne,Se),l(Se,st),l(O,qt),l(O,re),l(re,Ee),l(re,zt),l(re,Ne),l(Ne,nt),l(O,Rt),l(O,He),l(He,we),l(U,$t),l(U,ie),l(ie,ye),l(ie,Ft),l(ie,Y),l(Y,oe),l(oe,De),l(oe,Qt),l(oe,W),l(W,rt),l(W,Gt),l(W,it),l(W,Ot),l(Y,Yt),l(Y,ue),l(ue,Ve),l(ue,Jt),l(ue,Le),l(Le,ot),l(Y,Ut),l(Y,Ce),l(Ce,Wt),l(Ce,ut),x(o,dt,g),x(o,K,g),l(K,Me),l(K,Kt),l(K,de),l(de,ce),l(ce,fe),l(fe,Xt),l(fe,ct),l(fe,Zt),l(ce,el),l(ce,X),l(X,ft),l(X,tl),l(X,Ae),l(Ae,_t),l(Ae,ll),l(de,al),l(de,_e),ee.m(_e,null),x(o,mt,g),x(o,z,g),l(z,je),l(z,sl),l(z,ve),l(ve,nl),l(ve,pt),l(ve,rl),l(z,il),Re(Z,z,null),l(z,ol),B&&B.m(z,null),S=!0},p(o,g){var Q,Pe,xe;const he={};g&1&&(he.percent=o[0].percent_used),g&257&&(he.$$scope={dirty:g,ctx:o}),a.$set(he),(!S||g&32)&&h!==(h=((Q=o[5])==null?void 0:Q.icon)+"")&&P(m,h),(!S||g&1)&&H!==(H=o[0].delta>0?"+":"")&&P(T,H),(!S||g&1)&&j!==(j=N(Math.round(o[0].delta))+"")&&P(E,j),(!S||g&32&&I!==(I="flex items-center justify-center gap-2 "+((Pe=o[5])==null?void 0:Pe.color)))&&n(p,"class",I),(!S||g&32)&&C!==(C=((xe=o[5])==null?void 0:xe.label)+"")&&P(q,C);const me={};g&1&&(me.value=N(o[0].latest_reading)),g&1&&(me.subtitle="Last updated "+It(o[0].latest_date)),F.$set(me);const Ie={};g&1&&(Ie.value=N(Math.round(o[0].target_today-o[0].start_miles))),te.$set(Ie);const Te={};g&1&&(Te.value=N(o[0].daily_rate,1)),g&1&&(Te.color=o[0].daily_rate>o[0].annual_allowance/365?"amber":"green"),le.$set(Te);const pe={};g&1&&(pe.value=N(o[0].annual_allowance)),g&1&&(pe.subtitle=N(Math.round(o[0].annual_allowance/365))+" mi/day ideal"),ae.$set(pe),(!S||g&1)&&Ge!==(Ge=o[0].days_left_year+"")&&P(st,Ge),(!S||g&1)&&Oe!==(Oe=N(Math.round(o[0].miles_left_year))+"")&&P(nt,Oe),(!S||g&1)&&Ml(we,"width",Math.min(100,(365-o[0].days_left_year)/365*100)+"%"),(!S||g&1)&&Ye!==(Ye=o[0].years_left_term+"")&&P(rt,Ye),(!S||g&1)&&Je!==(Je=o[0].days_left_term+"")&&P(it,Je),(!S||g&1)&&Ue!==(Ue=N(Math.round(o[0].miles_left_term))+"")&&P(ot,Ue),(!S||g&1)&&We!==(We=It(o[0].plan_end)+"")&&P(ut,We),(!S||g&1)&&Ke!==(Ke=N(o[0].daily_rate,1)+"")&&P(ct,Ke),(!S||g&1)&&Xe!==(Xe=N(Math.round(o[0].projected_end))+"")&&P(ft,Xe),(!S||g&1)&&Ze!==(Ze=o[0].projected_over?"over":"under")&&P(_t,Ze),(!S||g&1&&vt!==(vt="text-2xl font-mono "+(o[0].projected_over?"text-gauge-red":"text-gauge-green")))&&n(X,"class",vt),gt!==(gt=bl(o))&&(ee.d(1),ee=gt(o),ee&&(ee.c(),ee.m(_e,null))),(!S||g&1&&ht!==(ht="w-16 h-16 rounded-full flex items-center justify-center "+(o[0].projected_over?"bg-gauge-red/20":"bg-gauge-green/20")))&&n(_e,"class",ht),(!S||g&1)&&et!==(et=N(o[0].latest_reading)+"")&&P(pt,et);const tt={};g&1&&(tt.currentOdometer=o[0].latest_reading),Z.$set(tt),o[3]?B||(B=xl(),B.c(),B.m(z,null)):B&&(B.d(1),B=null)},i(o){S||($(a.$$.fragment,o),$(F.$$.fragment,o),$(te.$$.fragment,o),$(le.$$.fragment,o),$(ae.$$.fragment,o),$(Z.$$.fragment,o),S=!0)},o(o){G(a.$$.fragment,o),G(F.$$.fragment,o),G(te.$$.fragment,o),G(le.$$.fragment,o),G(ae.$$.fragment,o),G(Z.$$.fragment,o),S=!1},d(o){o&&(i(e),i(at),i(U),i(dt),i(K),i(mt),i(z)),ze(a),ze(F),ze(te),ze(le),ze(ae),ee.d(),ze(Z),B&&B.d()}}}function la(s){let e,t,a,r,u,p="Add a Vehicle";return{c(){e=c("div"),t=c("p"),a=V(s[2]),r=y(),u=c("a"),u.textContent=p,this.h()},l(f){e=d(f,"DIV",{class:!0});var h=_(e);t=d(h,"P",{class:!0});var m=_(t);a=D(m,s[2]),m.forEach(i),r=w(h),u=d(h,"A",{href:!0,class:!0,"data-svelte-h":!0}),R(u)!=="svelte-h61p6t"&&(u.textContent=p),h.forEach(i),this.h()},h(){n(t,"class","text-gauge-red"),n(u,"href","/settings"),n(u,"class","btn-primary mt-4 inline-block"),n(e,"class","card border-gauge-red/30 bg-gauge-red/5")},m(f,h){x(f,e,h),l(e,t),l(t,a),l(e,r),l(e,u)},p(f,h){h&4&&P(a,f[2])},i:Qe,o:Qe,d(f){f&&i(e)}}}function aa(s){let e,t='<div class="animate-pulse text-carbon-400">Loading...</div>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(a){e=d(a,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-mbi4fd"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center h-64")},m(a,r){x(a,e,r)},p:Qe,i:Qe,o:Qe,d(a){a&&i(e)}}}function sa(s){let e,t=Math.round(s[0].percent_used)+"",a,r,u,p="% used";return{c(){e=c("span"),a=V(t),r=y(),u=c("span"),u.textContent=p,this.h()},l(f){e=d(f,"SPAN",{class:!0});var h=_(e);a=D(h,t),h.forEach(i),r=w(f),u=d(f,"SPAN",{class:!0,"data-svelte-h":!0}),R(u)!=="svelte-1nj2pjk"&&(u.textContent=p),this.h()},h(){n(e,"class","text-5xl font-mono font-bold text-carbon-100"),n(u,"class","text-lg text-carbon-400")},m(f,h){x(f,e,h),l(e,a),x(f,r,h),x(f,u,h)},p(f,h){h&1&&t!==(t=Math.round(f[0].percent_used)+"")&&P(a,t)},d(f){f&&(i(e),i(r),i(u))}}}function na(s){let e,t;return{c(){e=St("svg"),t=St("path"),this.h()},l(a){e=xt(a,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var r=_(e);t=xt(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(t).forEach(i),r.forEach(i),this.h()},h(){n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),n(e,"class","w-8 h-8 text-gauge-green"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(a,r){x(a,e,r),l(e,t)},d(a){a&&i(e)}}}function ra(s){let e,t;return{c(){e=St("svg"),t=St("path"),this.h()},l(a){e=xt(a,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var r=_(e);t=xt(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(t).forEach(i),r.forEach(i),this.h()},h(){n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),n(e,"class","w-8 h-8 text-gauge-red"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(a,r){x(a,e,r),l(e,t)},d(a){a&&i(e)}}}function xl(s){let e,t="Saving...";return{c(){e=c("p"),e.textContent=t,this.h()},l(a){e=d(a,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1e9p9ok"&&(e.textContent=t),this.h()},h(){n(e,"class","text-sm text-carbon-400 mt-2 animate-pulse")},m(a,r){x(a,e,r)},d(a){a&&i(e)}}}function ia(s){let e,t,a,r,u,p,f,h,m,k,M;function H(v,b){return v[0]?ea:Zl}let T=H(s),j=T(s);const E=[aa,la,ta],A=[];function I(v,b){return v[1]?0:v[2]?1:v[0]?2:-1}return~(m=I(s))&&(k=A[m]=E[m](s)),{c(){e=y(),t=c("div"),a=c("header"),r=c("p"),u=V(s[4]),p=y(),f=c("h1"),j.c(),h=y(),k&&k.c(),this.h()},l(v){Fl("svelte-yoqv72",document.head).forEach(i),e=w(v),t=d(v,"DIV",{class:!0});var C=_(t);a=d(C,"HEADER",{class:!0});var q=_(a);r=d(q,"P",{class:!0});var J=_(r);u=D(J,s[4]),J.forEach(i),p=w(q),f=d(q,"H1",{class:!0});var L=_(f);j.l(L),L.forEach(i),q.forEach(i),h=w(C),k&&k.l(C),C.forEach(i),this.h()},h(){document.title="Dashboard | MileMinder",n(r,"class","text-carbon-500 text-sm mb-1"),n(f,"class","text-3xl font-display font-bold text-carbon-100"),n(a,"class","mb-8 animate-fade-in"),n(t,"class","p-8")},m(v,b){x(v,e,b),x(v,t,b),l(t,a),l(a,r),l(r,u),l(a,p),l(a,f),j.m(f,null),l(t,h),~m&&A[m].m(t,null),M=!0},p(v,[b]){(!M||b&16)&&P(u,v[4]),T===(T=H(v))&&j?j.p(v,b):(j.d(1),j=T(v),j&&(j.c(),j.m(f,null)));let C=m;m=I(v),m===C?~m&&A[m].p(v,b):(k&&(Ll(),G(A[C],1,1,()=>{A[C]=null}),Tl()),~m?(k=A[m],k?k.p(v,b):(k=A[m]=E[m](v),k.c()),$(k,1),k.m(t,null)):k=null)},i(v){M||($(k),M=!0)},o(v){G(k),M=!1},d(v){v&&(i(e),i(t)),j.d(),~m&&A[m].d()}}}function oa(s,e,t){let a,r,u=null,p=!0,f="",h=!1;Ql(async()=>{await m()});async function m(){t(1,p=!0),t(2,f="");try{const M=await Gl();M.current?t(0,u=await Ol(M.current)):t(2,f="No vehicle selected. Please add a vehicle first.")}catch(M){t(2,f=M instanceof Error?M.message:"Failed to load status")}finally{t(1,p=!1)}}async function k(M){if(u){t(3,h=!0);try{await Jl(u.id,{miles:M.detail.miles}),await m()}catch(H){t(2,f=H instanceof Error?H.message:"Failed to add reading")}finally{t(3,h=!1)}}}return s.$$.update=()=>{s.$$.dirty&1&&t(5,a=u?Yl(u.delta):null)},t(4,r=new Date().toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),[u,p,f,h,r,a,k]}class va extends Nl{constructor(e){super(),Hl(this,e,oa,ia,Sl,{})}}export{va as component};
