import{s as rt,d as o,i as M,b as r,l,m as at,g as b,c as h,e as v,o as L,j as x,h as p,p as nt,n as ae,r as it,a as ue,q as st,u as Ve,v as Me,w as ot,f as O,t as Q,x as ee,y as te}from"../chunks/CVjQFEho.js";import{S as ct,i as ut,t as Oe,a as Qe,c as dt,d as ft,m as ht,b as pt,e as mt,g as _t}from"../chunks/OdZnOW3T.js";import{g as vt,a as $e,f as ce,b as gt}from"../chunks/DXV66Os-.js";import{Q as bt}from"../chunks/y-cuSnRl.js";function xt(c){let t,e,s,n,u="Current odometer",a,i,d=ce(c[0].latest_reading)+"",m,_,y,g="mi",D,C,R,de="Vehicle",ne,E,ie=(c[0].vehicle||c[0].id)+"",fe,he,S,K,Fe="Quick Add",De,W,Ue="Quickly add common distances to your current reading",Pe,j,pe,w,X,ze="Manual Entry",Le,me,_e,T,H,F,Ge="Odometer Reading",Se,U,P,ve,Te,Y,Je="mi",Ae,z,Be,oe=ce(c[0].latest_reading)+"",ge,Re,je,Z,G,Ke="Date",He,A,Ne,B,be,N,qe,We;j=new bt({props:{currentOdometer:c[0].latest_reading}}),j.$on("add",c[11]);let I=c[4]&&et(c),V=c[5]&&lt(c);function Xe(f,k){return f[3]?yt:Et}let xe=Xe(c),q=xe(c);return{c(){t=p("div"),e=p("div"),s=p("div"),n=p("p"),n.textContent=u,a=x(),i=p("p"),m=Q(d),_=x(),y=p("span"),y.textContent=g,D=x(),C=p("div"),R=p("p"),R.textContent=de,ne=x(),E=p("p"),fe=Q(ie),he=x(),S=p("div"),K=p("h2"),K.textContent=Fe,De=x(),W=p("p"),W.textContent=Ue,Pe=x(),mt(j.$$.fragment),pe=x(),w=p("form"),X=p("h2"),X.textContent=ze,Le=x(),I&&I.c(),me=x(),V&&V.c(),_e=x(),T=p("div"),H=p("div"),F=p("label"),F.textContent=Ge,Se=x(),U=p("div"),P=p("input"),Te=x(),Y=p("span"),Y.textContent=Je,Ae=x(),z=p("p"),Be=Q("Must be at least "),ge=Q(oe),Re=Q(" mi (current reading)"),je=x(),Z=p("div"),G=p("label"),G.textContent=Ke,He=x(),A=p("input"),Ne=x(),B=p("button"),q.c(),this.h()},l(f){t=h(f,"DIV",{class:!0});var k=v(t);e=h(k,"DIV",{class:!0});var $=v(e);s=h($,"DIV",{});var ke=v(s);n=h(ke,"P",{class:!0,"data-svelte-h":!0}),L(n)!=="svelte-9szu13"&&(n.textContent=u),a=b(ke),i=h(ke,"P",{class:!0});var Ce=v(i);m=O(Ce,d),_=b(Ce),y=h(Ce,"SPAN",{class:!0,"data-svelte-h":!0}),L(y)!=="svelte-1nys1pt"&&(y.textContent=g),Ce.forEach(o),ke.forEach(o),D=b($),C=h($,"DIV",{class:!0});var Ee=v(C);R=h(Ee,"P",{class:!0,"data-svelte-h":!0}),L(R)!=="svelte-yqtax1"&&(R.textContent=de),ne=b(Ee),E=h(Ee,"P",{class:!0});var Ye=v(E);fe=O(Ye,ie),Ye.forEach(o),Ee.forEach(o),$.forEach(o),k.forEach(o),he=b(f),S=h(f,"DIV",{class:!0});var le=v(S);K=h(le,"H2",{class:!0,"data-svelte-h":!0}),L(K)!=="svelte-1pyhu4w"&&(K.textContent=Fe),De=b(le),W=h(le,"P",{class:!0,"data-svelte-h":!0}),L(W)!=="svelte-1qs1ls3"&&(W.textContent=Ue),Pe=b(le),pt(j.$$.fragment,le),le.forEach(o),pe=b(f),w=h(f,"FORM",{class:!0});var J=v(w);X=h(J,"H2",{class:!0,"data-svelte-h":!0}),L(X)!=="svelte-t2hwc4"&&(X.textContent=ze),Le=b(J),I&&I.l(J),me=b(J),V&&V.l(J),_e=b(J),T=h(J,"DIV",{class:!0});var se=v(T);H=h(se,"DIV",{});var re=v(H);F=h(re,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(F)!=="svelte-1enk123"&&(F.textContent=Ge),Se=b(re),U=h(re,"DIV",{class:!0});var ye=v(U);P=h(ye,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0,min:!0}),Te=b(ye),Y=h(ye,"SPAN",{class:!0,"data-svelte-h":!0}),L(Y)!=="svelte-1vf1qpe"&&(Y.textContent=Je),ye.forEach(o),Ae=b(re),z=h(re,"P",{class:!0});var we=v(z);Be=O(we,"Must be at least "),ge=O(we,oe),Re=O(we," mi (current reading)"),we.forEach(o),re.forEach(o),je=b(se),Z=h(se,"DIV",{});var Ie=v(Z);G=h(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(G)!=="svelte-evn67"&&(G.textContent=Ke),He=b(Ie),A=h(Ie,"INPUT",{type:!0,id:!0,class:!0,max:!0}),Ie.forEach(o),Ne=b(se),B=h(se,"BUTTON",{type:!0,class:!0});var Ze=v(B);q.l(Ze),Ze.forEach(o),se.forEach(o),J.forEach(o),this.h()},h(){l(n,"class","text-sm text-carbon-400"),l(y,"class","text-lg text-carbon-500"),l(i,"class","text-3xl font-mono font-bold text-carbon-100"),l(R,"class","text-sm text-carbon-400"),l(E,"class","text-lg font-medium text-carbon-100"),l(C,"class","text-right"),l(e,"class","flex items-center justify-between"),l(t,"class","card mb-6 animate-slide-up"),l(K,"class","text-lg font-semibold text-carbon-100 mb-4"),l(W,"class","text-sm text-carbon-500 mb-4"),l(S,"class","card mb-6 animate-slide-up stagger-1"),l(X,"class","text-lg font-semibold text-carbon-100 mb-6"),l(F,"for","odometer"),l(F,"class","label"),l(P,"type","number"),l(P,"id","odometer"),l(P,"placeholder",ve=c[8].toString()),l(P,"class","input font-mono text-xl pr-12"),l(P,"min","0"),P.required=!0,l(Y,"class","absolute right-4 top-1/2 -translate-y-1/2 text-carbon-500"),l(U,"class","relative"),l(z,"class","text-xs text-carbon-500 mt-2"),l(G,"for","date"),l(G,"class","label"),l(A,"type","date"),l(A,"id","date"),l(A,"class","input"),l(A,"max",new Date().toISOString().split("T")[0]),l(B,"type","submit"),l(B,"class","btn-primary w-full py-4 text-lg flex items-center justify-center gap-2"),B.disabled=be=!c[9]||c[3],l(T,"class","space-y-6"),l(w,"class","card animate-slide-up stagger-2")},m(f,k){M(f,t,k),r(t,e),r(e,s),r(s,n),r(s,a),r(s,i),r(i,m),r(i,_),r(i,y),r(e,D),r(e,C),r(C,R),r(C,ne),r(C,E),r(E,fe),M(f,he,k),M(f,S,k),r(S,K),r(S,De),r(S,W),r(S,Pe),ht(j,S,null),M(f,pe,k),M(f,w,k),r(w,X),r(w,Le),I&&I.m(w,null),r(w,me),V&&V.m(w,null),r(w,_e),r(w,T),r(T,H),r(H,F),r(H,Se),r(H,U),r(U,P),Ve(P,c[1]),r(U,Te),r(U,Y),r(H,Ae),r(H,z),r(z,Be),r(z,ge),r(z,Re),r(T,je),r(T,Z),r(Z,G),r(Z,He),r(Z,A),Ve(A,c[6]),r(T,Ne),r(T,B),q.m(B,null),N=!0,qe||(We=[Me(P,"input",c[13]),Me(A,"input",c[14]),Me(w,"submit",ot(c[10]))],qe=!0)},p(f,k){(!N||k&1)&&d!==(d=ce(f[0].latest_reading)+"")&&ue(m,d),(!N||k&1)&&ie!==(ie=(f[0].vehicle||f[0].id)+"")&&ue(fe,ie);const $={};k&1&&($.currentOdometer=f[0].latest_reading),j.$set($),f[4]?I?I.p(f,k):(I=et(f),I.c(),I.m(w,me)):I&&(I.d(1),I=null),f[5]?V?V.p(f,k):(V=lt(f),V.c(),V.m(w,_e)):V&&(V.d(1),V=null),(!N||k&256&&ve!==(ve=f[8].toString()))&&l(P,"placeholder",ve),k&2&&st(P.value)!==f[1]&&Ve(P,f[1]),(!N||k&1)&&oe!==(oe=ce(f[0].latest_reading)+"")&&ue(ge,oe),k&64&&Ve(A,f[6]),xe!==(xe=Xe(f))&&(q.d(1),q=xe(f),q&&(q.c(),q.m(B,null))),(!N||k&520&&be!==(be=!f[9]||f[3]))&&(B.disabled=be)},i(f){N||(Qe(j.$$.fragment,f),N=!0)},o(f){Oe(j.$$.fragment,f),N=!1},d(f){f&&(o(t),o(he),o(S),o(pe),o(w)),ft(j),I&&I.d(),V&&V.d(),q.d(),qe=!1,it(We)}}}function kt(c){let t,e='<p class="text-gauge-amber">No vehicle selected. Please select a vehicle first.</p>';return{c(){t=p("div"),t.innerHTML=e,this.h()},l(s){t=h(s,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1c32d0x"&&(t.innerHTML=e),this.h()},h(){l(t,"class","card border-gauge-amber/30 bg-gauge-amber/5")},m(s,n){M(s,t,n)},p:ae,i:ae,o:ae,d(s){s&&o(t)}}}function Ct(c){let t,e='<div class="animate-pulse text-carbon-400">Loading...</div>';return{c(){t=p("div"),t.innerHTML=e,this.h()},l(s){t=h(s,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-mbi4fd"&&(t.innerHTML=e),this.h()},h(){l(t,"class","flex items-center justify-center h-64")},m(s,n){M(s,t,n)},p:ae,i:ae,o:ae,d(s){s&&o(t)}}}function et(c){let t,e,s,n,u=c[4].includes("less than"),a=u&&tt(c);return{c(){t=p("div"),e=p("p"),s=Q(c[4]),n=x(),a&&a.c(),this.h()},l(i){t=h(i,"DIV",{class:!0});var d=v(t);e=h(d,"P",{class:!0});var m=v(e);s=O(m,c[4]),m.forEach(o),n=b(d),a&&a.l(d),d.forEach(o),this.h()},h(){l(e,"class","text-gauge-red text-sm"),l(t,"class","mb-4 p-4 bg-gauge-red/10 border border-gauge-red/30 rounded-lg")},m(i,d){M(i,t,d),r(t,e),r(e,s),r(t,n),a&&a.m(t,null)},p(i,d){d&16&&ue(s,i[4]),d&16&&(u=i[4].includes("less than")),u?a?a.p(i,d):(a=tt(i),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(i){i&&o(t),a&&a.d()}}}function tt(c){let t,e,s,n,u="Force override (allow lower reading)",a,i;return{c(){t=p("label"),e=p("input"),s=x(),n=p("span"),n.textContent=u,this.h()},l(d){t=h(d,"LABEL",{class:!0});var m=v(t);e=h(m,"INPUT",{type:!0,class:!0}),s=b(m),n=h(m,"SPAN",{"data-svelte-h":!0}),L(n)!=="svelte-4ojr1g"&&(n.textContent=u),m.forEach(o),this.h()},h(){l(e,"type","checkbox"),l(e,"class","rounded bg-carbon-800 border-carbon-700"),l(t,"class","flex items-center gap-2 mt-2 text-sm text-carbon-400")},m(d,m){M(d,t,m),r(t,e),e.checked=c[7],r(t,s),r(t,n),a||(i=Me(e,"change",c[12]),a=!0)},p(d,m){m&128&&(e.checked=d[7])},d(d){d&&o(t),a=!1,i()}}}function lt(c){let t,e,s,n,u,a;return{c(){t=p("div"),e=p("p"),s=te("svg"),n=te("path"),u=x(),a=Q(c[5]),this.h()},l(i){t=h(i,"DIV",{class:!0});var d=v(t);e=h(d,"P",{class:!0});var m=v(e);s=ee(m,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var _=v(s);n=ee(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(n).forEach(o),_.forEach(o),u=b(m),a=O(m,c[5]),m.forEach(o),d.forEach(o),this.h()},h(){l(n,"stroke-linecap","round"),l(n,"stroke-linejoin","round"),l(n,"stroke-width","2"),l(n,"d","M5 13l4 4L19 7"),l(s,"class","w-4 h-4"),l(s,"fill","none"),l(s,"stroke","currentColor"),l(s,"viewBox","0 0 24 24"),l(e,"class","text-gauge-green text-sm flex items-center gap-2"),l(t,"class","mb-4 p-4 bg-gauge-green/10 border border-gauge-green/30 rounded-lg")},m(i,d){M(i,t,d),r(t,e),r(e,s),r(s,n),r(e,u),r(e,a)},p(i,d){d&32&&ue(a,i[5])},d(i){i&&o(t)}}}function Et(c){let t,e,s;return{c(){t=te("svg"),e=te("path"),s=Q(`
						Record Reading`),this.h()},l(n){t=ee(n,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var u=v(t);e=ee(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(e).forEach(o),u.forEach(o),s=O(n,`
						Record Reading`),this.h()},h(){l(e,"stroke-linecap","round"),l(e,"stroke-linejoin","round"),l(e,"stroke-width","2"),l(e,"d","M5 13l4 4L19 7"),l(t,"class","w-5 h-5"),l(t,"fill","none"),l(t,"stroke","currentColor"),l(t,"viewBox","0 0 24 24")},m(n,u){M(n,t,u),r(t,e),M(n,s,u)},d(n){n&&(o(t),o(s))}}}function yt(c){let t,e,s,n;return{c(){t=te("svg"),e=te("circle"),s=te("path"),n=Q(`
						Saving...`),this.h()},l(u){t=ee(u,"svg",{class:!0,fill:!0,viewBox:!0});var a=v(t);e=ee(a,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),v(e).forEach(o),s=ee(a,"path",{class:!0,fill:!0,d:!0}),v(s).forEach(o),a.forEach(o),n=O(u,`
						Saving...`),this.h()},h(){l(e,"class","opacity-25"),l(e,"cx","12"),l(e,"cy","12"),l(e,"r","10"),l(e,"stroke","currentColor"),l(e,"stroke-width","4"),l(s,"class","opacity-75"),l(s,"fill","currentColor"),l(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"),l(t,"class","animate-spin w-5 h-5"),l(t,"fill","none"),l(t,"viewBox","0 0 24 24")},m(u,a){M(u,t,a),r(t,e),r(t,s),M(u,n,a)},d(u){u&&(o(t),o(n))}}}function wt(c){let t,e,s,n='<h1 class="text-3xl font-display font-bold text-carbon-100">Add Mileage</h1> <p class="text-carbon-500 mt-2">Record your current odometer reading</p>',u,a,i,d;const m=[Ct,kt,xt],_=[];function y(g,D){return g[2]?0:g[0]?2:1}return a=y(c),i=_[a]=m[a](c),{c(){t=x(),e=p("div"),s=p("header"),s.innerHTML=n,u=x(),i.c(),this.h()},l(g){at("svelte-sdy02v",document.head).forEach(o),t=b(g),e=h(g,"DIV",{class:!0});var C=v(e);s=h(C,"HEADER",{class:!0,"data-svelte-h":!0}),L(s)!=="svelte-glf5x"&&(s.innerHTML=n),u=b(C),i.l(C),C.forEach(o),this.h()},h(){document.title="Add Mileage | MileMinder",l(s,"class","mb-8 animate-fade-in"),l(e,"class","p-8 max-w-2xl mx-auto")},m(g,D){M(g,t,D),M(g,e,D),r(e,s),r(e,u),_[a].m(e,null),d=!0},p(g,[D]){let C=a;a=y(g),a===C?_[a].p(g,D):(_t(),Oe(_[C],1,1,()=>{_[C]=null}),dt(),i=_[a],i?i.p(g,D):(i=_[a]=m[a](g),i.c()),Qe(i,1),i.m(e,null))},i(g){d||(Qe(i),d=!0)},o(g){Oe(i),d=!1},d(g){g&&(o(t),o(e)),_[a].d()}}}function It(c,t,e){let s,n,u=null,a=!0,i=!1,d="",m="",_="",y=new Date().toISOString().split("T")[0],g=!1;nt(async()=>{try{const E=await vt();E.current&&(e(0,u=await $e(E.current)),e(1,_=""))}catch(E){e(4,d=E instanceof Error?E.message:"Failed to load vehicle")}finally{e(2,a=!1)}});async function D(){if(!(!u||!_)){e(3,i=!0),e(4,d=""),e(5,m="");try{await gt(u.id,{miles:parseInt(_),date:y,force:g}),e(5,m=`Recorded ${ce(parseInt(_))} mi for ${y}`),e(0,u=await $e(u.id)),e(1,_="")}catch(E){e(4,d=E instanceof Error?E.message:"Failed to add reading")}finally{e(3,i=!1)}}}async function C(E){u&&(e(1,_=E.detail.miles.toString()),await D())}function R(){g=this.checked,e(7,g)}function de(){_=st(this.value),e(1,_)}function ne(){y=this.value,e(6,y)}return c.$$.update=()=>{c.$$.dirty&2&&e(9,s=_&&parseInt(_)>0),c.$$.dirty&1&&e(8,n=u?u.latest_reading:0)},[u,_,a,i,d,m,y,g,n,s,D,C,R,de,ne]}class Lt extends ct{constructor(t){super(),ut(this,t,It,wt,rt,{})}}export{Lt as component};
