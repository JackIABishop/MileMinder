import{s as xt,n as W,d as c,i as w,b as r,l as i,m as kt,g as M,c as d,e as g,o as S,j as V,h as u,p as yt,x as ut,f as z,y as ft,t as F,a as J,z as Ct,G as ht,r as Et,v as ot}from"../chunks/CVjQFEho.js";import{e as _t}from"../chunks/D6YF6ztN.js";import{S as Dt,i as wt}from"../chunks/OdZnOW3T.js";import{g as Tt,a as Mt,e as Vt,h as pt,i as Pt,d as et,f as lt}from"../chunks/DXV66Os-.js";function vt(a,t,l){const e=a.slice();e[12]=t[l],e[18]=l;const s=e[1].length-1-e[18];e[13]=s;const n=e[6](e[13]);e[14]=n;const o=e[7](e[13]);e[15]=o;const _=e[15]>0?e[14]/e[15]:0;return e[16]=_,e}function mt(a){let t,l,e,s,n,o;return{c(){t=u("a"),l=ft("svg"),e=ft("path"),s=F(`
				Export CSV`),this.h()},l(_){t=d(_,"A",{href:!0,download:!0,class:!0});var f=g(t);l=ut(f,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var E=g(l);e=ut(E,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(e).forEach(c),E.forEach(c),s=z(f,`
				Export CSV`),f.forEach(c),this.h()},h(){i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round"),i(e,"stroke-width","2"),i(e,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),i(l,"class","w-4 h-4"),i(l,"fill","none"),i(l,"stroke","currentColor"),i(l,"viewBox","0 0 24 24"),i(t,"href",n=pt(a[0].id)),i(t,"download",o=a[0].id+"_readings.csv"),i(t,"class","btn-secondary flex items-center gap-2")},m(_,f){w(_,t,f),r(t,l),r(l,e),r(t,s)},p(_,f){f&1&&n!==(n=pt(_[0].id))&&i(t,"href",n),f&1&&o!==(o=_[0].id+"_readings.csv")&&i(t,"download",o)},d(_){_&&c(t)}}}function Ht(a){let t,l,e,s="Total Readings",n,o,_=a[1].length+"",f,E,k,m,b="First Reading",L,P,p=et(a[1][0].date)+"",I,R,B,A,tt="Latest Reading",j,U,K=et(a[1][a[1].length-1].date)+"",Y,H,q,O,D,G,X='<tr class="border-b border-carbon-800"><th class="text-left py-3 px-4 text-sm font-medium text-carbon-400">Date</th> <th class="text-right py-3 px-4 text-sm font-medium text-carbon-400">Odometer</th> <th class="text-right py-3 px-4 text-sm font-medium text-carbon-400">Miles Driven</th> <th class="text-right py-3 px-4 text-sm font-medium text-carbon-400">Days</th> <th class="text-right py-3 px-4 text-sm font-medium text-carbon-400">Daily Avg</th> <th class="py-3 px-4"></th></tr>',N,C,v=_t(a[1].slice().reverse()),h=[];for(let x=0;x<v.length;x+=1)h[x]=gt(vt(a,v,x));return{c(){t=u("div"),l=u("div"),e=u("p"),e.textContent=s,n=V(),o=u("p"),f=F(_),E=V(),k=u("div"),m=u("p"),m.textContent=b,L=V(),P=u("p"),I=F(p),R=V(),B=u("div"),A=u("p"),A.textContent=tt,j=V(),U=u("p"),Y=F(K),H=V(),q=u("div"),O=u("div"),D=u("table"),G=u("thead"),G.innerHTML=X,N=V(),C=u("tbody");for(let x=0;x<h.length;x+=1)h[x].c();this.h()},l(x){t=d(x,"DIV",{class:!0});var T=g(t);l=d(T,"DIV",{class:!0});var y=g(l);e=d(y,"P",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-eyx0pn"&&(e.textContent=s),n=M(y),o=d(y,"P",{class:!0});var Q=g(o);f=z(Q,_),Q.forEach(c),y.forEach(c),E=M(T),k=d(T,"DIV",{class:!0});var Z=g(k);m=d(Z,"P",{class:!0,"data-svelte-h":!0}),S(m)!=="svelte-goi3aq"&&(m.textContent=b),L=M(Z),P=d(Z,"P",{class:!0});var st=g(P);I=z(st,p),st.forEach(c),Z.forEach(c),R=M(T),B=d(T,"DIV",{class:!0});var $=g(B);A=d($,"P",{class:!0,"data-svelte-h":!0}),S(A)!=="svelte-1drbhbn"&&(A.textContent=tt),j=M($),U=d($,"P",{class:!0});var nt=g(U);Y=z(nt,K),nt.forEach(c),$.forEach(c),T.forEach(c),H=M(x),q=d(x,"DIV",{class:!0});var it=g(q);O=d(it,"DIV",{class:!0});var ct=g(O);D=d(ct,"TABLE",{class:!0});var at=g(D);G=d(at,"THEAD",{"data-svelte-h":!0}),S(G)!=="svelte-1cazca0"&&(G.innerHTML=X),N=M(at),C=d(at,"TBODY",{});var dt=g(C);for(let rt=0;rt<h.length;rt+=1)h[rt].l(dt);dt.forEach(c),at.forEach(c),ct.forEach(c),it.forEach(c),this.h()},h(){i(e,"class","text-sm text-carbon-400 mb-1"),i(o,"class","text-2xl font-mono font-bold text-carbon-100"),i(l,"class","card animate-slide-up"),i(m,"class","text-sm text-carbon-400 mb-1"),i(P,"class","text-lg font-mono font-bold text-carbon-100"),i(k,"class","card animate-slide-up stagger-1"),i(A,"class","text-sm text-carbon-400 mb-1"),i(U,"class","text-lg font-mono font-bold text-carbon-100"),i(B,"class","card animate-slide-up stagger-2"),i(t,"class","grid grid-cols-3 gap-4 mb-6"),i(D,"class","w-full"),i(O,"class","overflow-x-auto"),i(q,"class","card animate-slide-up stagger-3 overflow-hidden")},m(x,T){w(x,t,T),r(t,l),r(l,e),r(l,n),r(l,o),r(o,f),r(t,E),r(t,k),r(k,m),r(k,L),r(k,P),r(P,I),r(t,R),r(t,B),r(B,A),r(B,j),r(B,U),r(U,Y),w(x,H,T),w(x,q,T),r(q,O),r(O,D),r(D,G),r(D,N),r(D,C);for(let y=0;y<h.length;y+=1)h[y]&&h[y].m(C,null)},p(x,T){if(T&2&&_!==(_=x[1].length+"")&&J(f,_),T&2&&p!==(p=et(x[1][0].date)+"")&&J(I,p),T&2&&K!==(K=et(x[1][x[1].length-1].date)+"")&&J(Y,K),T&242){v=_t(x[1].slice().reverse());let y;for(y=0;y<v.length;y+=1){const Q=vt(x,v,y);h[y]?h[y].p(Q,T):(h[y]=gt(Q),h[y].c(),h[y].m(C,null))}for(;y<h.length;y+=1)h[y].d(1);h.length=v.length}},d(x){x&&(c(t),c(H),c(q)),Ct(h,x)}}}function Lt(a){let t,l='<svg class="w-16 h-16 mx-auto text-carbon-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <h2 class="text-xl font-semibold text-carbon-300 mb-2">No Readings Yet</h2> <p class="text-carbon-500 mb-6">Start logging your odometer readings</p> <a href="/add" class="btn-primary">Add First Reading</a>';return{c(){t=u("div"),t.innerHTML=l,this.h()},l(e){t=d(e,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1i6yade"&&(t.innerHTML=l),this.h()},h(){i(t,"class","card text-center py-12")},m(e,s){w(e,t,s)},p:W,d(e){e&&c(t)}}}function At(a){let t,l='<p class="text-carbon-400">No vehicle selected. Please select a vehicle first.</p>';return{c(){t=u("div"),t.innerHTML=l,this.h()},l(e){t=d(e,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-ul34vr"&&(t.innerHTML=l),this.h()},h(){i(t,"class","card")},m(e,s){w(e,t,s)},p:W,d(e){e&&c(t)}}}function Nt(a){let t,l,e;return{c(){t=u("div"),l=u("p"),e=F(a[3]),this.h()},l(s){t=d(s,"DIV",{class:!0});var n=g(t);l=d(n,"P",{class:!0});var o=g(l);e=z(o,a[3]),o.forEach(c),n.forEach(c),this.h()},h(){i(l,"class","text-gauge-red"),i(t,"class","card border-gauge-red/30 bg-gauge-red/5 mb-6")},m(s,n){w(s,t,n),r(t,l),r(l,e)},p(s,n){n&8&&J(e,s[3])},d(s){s&&c(t)}}}function St(a){let t,l='<div class="animate-pulse text-carbon-400">Loading...</div>';return{c(){t=u("div"),t.innerHTML=l,this.h()},l(e){t=d(e,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-mbi4fd"&&(t.innerHTML=l),this.h()},h(){i(t,"class","flex items-center justify-center h-64")},m(e,s){w(e,t,s)},p:W,d(e){e&&c(t)}}}function It(a){let t,l="—";return{c(){t=u("span"),t.textContent=l,this.h()},l(e){t=d(e,"SPAN",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1b7e24p"&&(t.textContent=l),this.h()},h(){i(t,"class","text-carbon-600")},m(e,s){w(e,t,s)},p:W,d(e){e&&c(t)}}}function Rt(a){let t,l,e=lt(a[14])+"",s;return{c(){t=u("span"),l=F("+"),s=F(e),this.h()},l(n){t=d(n,"SPAN",{class:!0});var o=g(t);l=z(o,"+"),s=z(o,e),o.forEach(c),this.h()},h(){i(t,"class","font-mono text-carbon-300")},m(n,o){w(n,t,o),r(t,l),r(t,s)},p(n,o){o&2&&e!==(e=lt(n[14])+"")&&J(s,e)},d(n){n&&c(t)}}}function Bt(a){let t,l="—";return{c(){t=u("span"),t.textContent=l,this.h()},l(e){t=d(e,"SPAN",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1b7e24p"&&(t.textContent=l),this.h()},h(){i(t,"class","text-carbon-600")},m(e,s){w(e,t,s)},p:W,d(e){e&&c(t)}}}function jt(a){let t,l=a[15]+"",e;return{c(){t=u("span"),e=F(l),this.h()},l(s){t=d(s,"SPAN",{class:!0});var n=g(t);e=z(n,l),n.forEach(c),this.h()},h(){i(t,"class","font-mono text-carbon-300")},m(s,n){w(s,t,n),r(t,e)},p(s,n){n&2&&l!==(l=s[15]+"")&&J(e,l)},d(s){s&&c(t)}}}function Ot(a){let t,l="—";return{c(){t=u("span"),t.textContent=l,this.h()},l(e){t=d(e,"SPAN",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1b7e24p"&&(t.textContent=l),this.h()},h(){i(t,"class","text-carbon-600")},m(e,s){w(e,t,s)},p:W,d(e){e&&c(t)}}}function zt(a){let t,l=lt(a[16],1)+"",e;return{c(){t=u("span"),e=F(l),this.h()},l(s){t=d(s,"SPAN",{class:!0});var n=g(t);e=z(n,l),n.forEach(c),this.h()},h(){i(t,"class","font-mono text-carbon-300")},m(s,n){w(s,t,n),r(t,e)},p(s,n){n&2&&l!==(l=lt(s[16],1)+"")&&J(e,l)},d(s){s&&c(t)}}}function bt(a){let t;function l(n,o){return n[4]===n[12].date?Ut:Ft}let e=l(a),s=e(a);return{c(){s.c(),t=ht()},l(n){s.l(n),t=ht()},m(n,o){s.m(n,o),w(n,t,o)},p(n,o){e===(e=l(n))&&s?s.p(n,o):(s.d(1),s=e(n),s&&(s.c(),s.m(t.parentNode,t)))},d(n){n&&c(t),s.d(n)}}}function Ft(a){let t,l='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',e,s;function n(){return a[10](a[12])}return{c(){t=u("button"),t.innerHTML=l,this.h()},l(o){t=d(o,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),S(t)!=="svelte-1o0edob"&&(t.innerHTML=l),this.h()},h(){i(t,"class","text-carbon-500 hover:text-gauge-red transition-colors"),i(t,"title","Delete reading")},m(o,_){w(o,t,_),e||(s=ot(t,"click",n),e=!0)},p(o,_){a=o},d(o){o&&c(t),e=!1,s()}}}function Ut(a){let t,l,e="Confirm",s,n,o="Cancel",_,f;function E(){return a[8](a[12])}return{c(){t=u("div"),l=u("button"),l.textContent=e,s=V(),n=u("button"),n.textContent=o,this.h()},l(k){t=d(k,"DIV",{class:!0});var m=g(t);l=d(m,"BUTTON",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-1tqldrc"&&(l.textContent=e),s=M(m),n=d(m,"BUTTON",{class:!0,"data-svelte-h":!0}),S(n)!=="svelte-1sf22u8"&&(n.textContent=o),m.forEach(c),this.h()},h(){i(l,"class","text-xs text-gauge-red hover:underline"),i(n,"class","text-xs text-carbon-400 hover:underline"),i(t,"class","flex items-center justify-end gap-2")},m(k,m){w(k,t,m),r(t,l),r(t,s),r(t,n),_||(f=[ot(l,"click",E),ot(n,"click",a[9])],_=!0)},p(k,m){a=k},d(k){k&&c(t),_=!1,Et(f)}}}function gt(a){let t,l,e,s=et(a[12].date)+"",n,o,_,f,E=lt(a[12].miles)+"",k,m,b,L="mi",P,p,I,R,B,A,tt,j,U;function K(v,h){return v[13]>0?Rt:It}let Y=K(a),H=Y(a);function q(v,h){return v[13]>0?jt:Bt}let O=q(a),D=O(a);function G(v,h){return v[13]>0&&v[15]>0?zt:Ot}let X=G(a),N=X(a),C=a[13]>0&&bt(a);return{c(){t=u("tr"),l=u("td"),e=u("span"),n=F(s),o=V(),_=u("td"),f=u("span"),k=F(E),m=V(),b=u("span"),b.textContent=L,P=V(),p=u("td"),H.c(),I=V(),R=u("td"),D.c(),B=V(),A=u("td"),N.c(),tt=V(),j=u("td"),C&&C.c(),U=V(),this.h()},l(v){t=d(v,"TR",{class:!0});var h=g(t);l=d(h,"TD",{class:!0});var x=g(l);e=d(x,"SPAN",{class:!0});var T=g(e);n=z(T,s),T.forEach(c),x.forEach(c),o=M(h),_=d(h,"TD",{class:!0});var y=g(_);f=d(y,"SPAN",{class:!0});var Q=g(f);k=z(Q,E),Q.forEach(c),m=M(y),b=d(y,"SPAN",{class:!0,"data-svelte-h":!0}),S(b)!=="svelte-41moz1"&&(b.textContent=L),y.forEach(c),P=M(h),p=d(h,"TD",{class:!0});var Z=g(p);H.l(Z),Z.forEach(c),I=M(h),R=d(h,"TD",{class:!0});var st=g(R);D.l(st),st.forEach(c),B=M(h),A=d(h,"TD",{class:!0});var $=g(A);N.l($),$.forEach(c),tt=M(h),j=d(h,"TD",{class:!0});var nt=g(j);C&&C.l(nt),nt.forEach(c),U=M(h),h.forEach(c),this.h()},h(){i(e,"class","font-medium text-carbon-100"),i(l,"class","py-3 px-4"),i(f,"class","font-mono text-carbon-100"),i(b,"class","text-carbon-500 text-sm ml-1"),i(_,"class","py-3 px-4 text-right"),i(p,"class","py-3 px-4 text-right"),i(R,"class","py-3 px-4 text-right"),i(A,"class","py-3 px-4 text-right"),i(j,"class","py-3 px-4 text-right"),i(t,"class","border-b border-carbon-800/50 hover:bg-carbon-800/30 transition-colors")},m(v,h){w(v,t,h),r(t,l),r(l,e),r(e,n),r(t,o),r(t,_),r(_,f),r(f,k),r(_,m),r(_,b),r(t,P),r(t,p),H.m(p,null),r(t,I),r(t,R),D.m(R,null),r(t,B),r(t,A),N.m(A,null),r(t,tt),r(t,j),C&&C.m(j,null),r(t,U)},p(v,h){h&2&&s!==(s=et(v[12].date)+"")&&J(n,s),h&2&&E!==(E=lt(v[12].miles)+"")&&J(k,E),Y===(Y=K(v))&&H?H.p(v,h):(H.d(1),H=Y(v),H&&(H.c(),H.m(p,null))),O===(O=q(v))&&D?D.p(v,h):(D.d(1),D=O(v),D&&(D.c(),D.m(R,null))),X===(X=G(v))&&N?N.p(v,h):(N.d(1),N=X(v),N&&(N.c(),N.m(A,null))),v[13]>0?C?C.p(v,h):(C=bt(v),C.c(),C.m(j,null)):C&&(C.d(1),C=null)},d(v){v&&c(t),H.d(),D.d(),N.d(),C&&C.d()}}}function qt(a){let t,l,e,s,n='<h1 class="text-3xl font-display font-bold text-carbon-100">Reading History</h1> <p class="text-carbon-500 mt-2">View and manage your odometer readings</p>',o,_,f=a[0]&&mt(a);function E(b,L){return b[2]?St:b[3]?Nt:b[0]?b[1].length===0?Lt:Ht:At}let k=E(a),m=k(a);return{c(){t=V(),l=u("div"),e=u("header"),s=u("div"),s.innerHTML=n,o=V(),f&&f.c(),_=V(),m.c(),this.h()},l(b){kt("svelte-ad95wy",document.head).forEach(c),t=M(b),l=d(b,"DIV",{class:!0});var P=g(l);e=d(P,"HEADER",{class:!0});var p=g(e);s=d(p,"DIV",{"data-svelte-h":!0}),S(s)!=="svelte-15x94wm"&&(s.innerHTML=n),o=M(p),f&&f.l(p),p.forEach(c),_=M(P),m.l(P),P.forEach(c),this.h()},h(){document.title="History | MileMinder",i(e,"class","mb-8 animate-fade-in flex items-start justify-between"),i(l,"class","p-8")},m(b,L){w(b,t,L),w(b,l,L),r(l,e),r(e,s),r(e,o),f&&f.m(e,null),r(l,_),m.m(l,null)},p(b,[L]){b[0]?f?f.p(b,L):(f=mt(b),f.c(),f.m(e,null)):f&&(f.d(1),f=null),k===(k=E(b))&&m?m.p(b,L):(m.d(1),m=k(b),m&&(m.c(),m.m(l,null)))},i:W,o:W,d(b){b&&(c(t),c(l)),f&&f.d(),m.d()}}}function Yt(a,t,l){let e=null,s=[],n=!0,o="",_=null;yt(async()=>{await f()});async function f(){l(2,n=!0),l(3,o="");try{const p=await Tt();p.current&&(l(0,e=await Mt(p.current)),l(1,s=await Vt(p.current)))}catch(p){l(3,o=p instanceof Error?p.message:"Failed to load data")}finally{l(2,n=!1)}}async function E(p){if(e)try{await Pt(e.id,p),l(4,_=null),await f()}catch(I){l(3,o=I instanceof Error?I.message:"Failed to delete reading")}}function k(p){return p===0?0:s[p].miles-s[p-1].miles}function m(p){if(p===0)return 0;const I=new Date(s[p].date),R=new Date(s[p-1].date);return Math.round((I.getTime()-R.getTime())/(1e3*60*60*24))}return[e,s,n,o,_,E,k,m,p=>E(p.date),()=>l(4,_=null),p=>l(4,_=p.date)]}class Wt extends Dt{constructor(t){super(),wt(this,t,Yt,qt,xt,{})}}export{Wt as component};
