import{s as tt,d as r,i as G,b as t,l as c,m as lt,g as V,c as o,e as m,o as Y,j as C,h as i,p as at,n as ae,a as H,f as E,t as k,z as st,v as nt,B as rt}from"../chunks/CVjQFEho.js";import{S as ot,i as it,t as xe,a as he,c as Xe,g as Ze,d as ct,m as dt,b as ft,e as ut}from"../chunks/OdZnOW3T.js";import{e as Ue}from"../chunks/D6YF6ztN.js";import{c as ht,s as vt,f as ue,d as Ie}from"../chunks/DXV66Os-.js";import{G as _t}from"../chunks/DlDG5wvu.js";function Re(l,e,s){const a=l.slice();return a[6]=e[s],a[8]=s,a}function pt(l){let e,s,a,d="Total Vehicles",h,n,p=l[0].length+"",w,D,b,P,g="Under Budget",M,y,I=l[0].filter(Ke).length+"",N,L,B,F,U="Over Budget",J,q,K=l[0].filter(Qe).length+"",Z,S,j,R,O=Ue(l[0]),u=[];for(let f=0;f<O.length;f+=1)u[f]=Ye(Re(l,O,f));const se=f=>xe(u[f],1,1,()=>{u[f]=null});return{c(){e=i("div"),s=i("div"),a=i("p"),a.textContent=d,h=C(),n=i("p"),w=k(p),D=C(),b=i("div"),P=i("p"),P.textContent=g,M=C(),y=i("p"),N=k(I),L=C(),B=i("div"),F=i("p"),F.textContent=U,J=C(),q=i("p"),Z=k(K),S=C(),j=i("div");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=o(f,"DIV",{class:!0});var v=m(e);s=o(v,"DIV",{class:!0});var _=m(s);a=o(_,"P",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-16j8ldj"&&(a.textContent=d),h=V(_),n=o(_,"P",{class:!0});var Q=m(n);w=E(Q,p),Q.forEach(r),_.forEach(r),D=V(v),b=o(v,"DIV",{class:!0});var X=m(b);P=o(X,"P",{class:!0,"data-svelte-h":!0}),Y(P)!=="svelte-64k2rj"&&(P.textContent=g),M=V(X),y=o(X,"P",{class:!0});var re=m(y);N=E(re,I),re.forEach(r),X.forEach(r),L=V(v),B=o(v,"DIV",{class:!0});var $=m(B);F=o($,"P",{class:!0,"data-svelte-h":!0}),Y(F)!=="svelte-1lj6l"&&(F.textContent=U),J=V($),q=o($,"P",{class:!0});var W=m(q);Z=E(W,K),W.forEach(r),$.forEach(r),v.forEach(r),S=V(f),j=o(f,"DIV",{class:!0});var ve=m(j);for(let ne=0;ne<u.length;ne+=1)u[ne].l(ve);ve.forEach(r),this.h()},h(){c(a,"class","text-sm text-carbon-400 mb-1"),c(n,"class","text-3xl font-mono font-bold text-carbon-100"),c(s,"class","card animate-slide-up"),c(P,"class","text-sm text-carbon-400 mb-1"),c(y,"class","text-3xl font-mono font-bold text-gauge-green"),c(b,"class","card animate-slide-up stagger-1"),c(F,"class","text-sm text-carbon-400 mb-1"),c(q,"class","text-3xl font-mono font-bold text-gauge-red"),c(B,"class","card animate-slide-up stagger-2"),c(e,"class","grid grid-cols-3 gap-4 mb-8"),c(j,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(f,v){G(f,e,v),t(e,s),t(s,a),t(s,h),t(s,n),t(n,w),t(e,D),t(e,b),t(b,P),t(b,M),t(b,y),t(y,N),t(e,L),t(e,B),t(B,F),t(B,J),t(B,q),t(q,Z),G(f,S,v),G(f,j,v);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(j,null);R=!0},p(f,v){if((!R||v&1)&&p!==(p=f[0].length+"")&&H(w,p),(!R||v&1)&&I!==(I=f[0].filter(Ke).length+"")&&H(N,I),(!R||v&1)&&K!==(K=f[0].filter(Qe).length+"")&&H(Z,K),v&9){O=Ue(f[0]);let _;for(_=0;_<O.length;_+=1){const Q=Re(f,O,_);u[_]?(u[_].p(Q,v),he(u[_],1)):(u[_]=Ye(Q),u[_].c(),he(u[_],1),u[_].m(j,null))}for(Ze(),_=O.length;_<u.length;_+=1)se(_);Xe()}},i(f){if(!R){for(let v=0;v<O.length;v+=1)he(u[v]);R=!0}},o(f){u=u.filter(Boolean);for(let v=0;v<u.length;v+=1)xe(u[v]);R=!1},d(f){f&&(r(e),r(S),r(j)),st(u,f)}}}function mt(l){let e,s='<svg class="w-16 h-16 mx-auto text-carbon-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <h2 class="text-xl font-semibold text-carbon-300 mb-2">No Vehicles Yet</h2> <p class="text-carbon-500 mb-6">Add your first vehicle to start tracking mileage</p> <a href="/settings" class="btn-primary">Add Vehicle</a>';return{c(){e=i("div"),e.innerHTML=s,this.h()},l(a){e=o(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1tny4ij"&&(e.innerHTML=s),this.h()},h(){c(e,"class","card text-center py-12")},m(a,d){G(a,e,d)},p:ae,i:ae,o:ae,d(a){a&&r(e)}}}function gt(l){let e,s,a;return{c(){e=i("div"),s=i("p"),a=k(l[2]),this.h()},l(d){e=o(d,"DIV",{class:!0});var h=m(e);s=o(h,"P",{class:!0});var n=m(s);a=E(n,l[2]),n.forEach(r),h.forEach(r),this.h()},h(){c(s,"class","text-gauge-red"),c(e,"class","card border-gauge-red/30 bg-gauge-red/5")},m(d,h){G(d,e,h),t(e,s),t(s,a)},p(d,h){h&4&&H(a,d[2])},i:ae,o:ae,d(d){d&&r(e)}}}function bt(l){let e,s='<div class="animate-pulse text-carbon-400">Loading...</div>';return{c(){e=i("div"),e.innerHTML=s,this.h()},l(a){e=o(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-mbi4fd"&&(e.innerHTML=s),this.h()},h(){c(e,"class","flex items-center justify-center h-64")},m(a,d){G(a,e,d)},p:ae,i:ae,o:ae,d(a){a&&r(e)}}}function We(l){let e,s='<span class="px-2 py-1 text-xs font-medium bg-accent-primary/20 text-accent-primary rounded-full">Active</span>';return{c(){e=i("div"),e.innerHTML=s,this.h()},l(a){e=o(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1igh62l"&&(e.innerHTML=s),this.h()},h(){c(e,"class","absolute top-4 right-4")},m(a,d){G(a,e,d)},d(a){a&&r(e)}}}function xt(l){let e,s=Math.round(l[6].percent_used)+"",a,d;return{c(){e=i("span"),a=k(s),d=k("%"),this.h()},l(h){e=o(h,"SPAN",{class:!0});var n=m(e);a=E(n,s),d=E(n,"%"),n.forEach(r),this.h()},h(){c(e,"class","text-sm font-mono font-bold")},m(h,n){G(h,e,n),t(e,a),t(e,d)},p(h,n){n&1&&s!==(s=Math.round(h[6].percent_used)+"")&&H(a,s)},d(h){h&&r(e)}}}function Ye(l){let e,s,a,d,h,n,p,w=(l[6].vehicle||l[6].id)+"",D,b,P,g=l[6].id+"",M,y,I,N,L,B="Odometer",F,U,J=ue(l[6].latest_reading)+"",q,K,Z,S,j,R="Delta",O,u,se=l[6].delta>0?"+":"",f,v=ue(Math.round(l[6].delta))+"",_,Q,X,re,$,W,ve="Term left",ne,oe,_e=Je(l[6])+"",Ee,je,ie,ee,te,Ae,pe=Ie(l[6].plan_start)+"",ke,Te,me=Ie(l[6].plan_end)+"",Ve,He,ce,ge=ue(l[6].annual_allowance)+"",Ce,Ne,Se,T,$e,Fe,A=l[6].is_default&&We();d=new _t({props:{percent:l[6].percent_used,size:80,strokeWidth:6,$$slots:{default:[xt]},$$scope:{ctx:l}}});function et(){return l[4](l[6])}return{c(){e=i("button"),A&&A.c(),s=C(),a=i("div"),ut(d.$$.fragment),h=C(),n=i("div"),p=i("h3"),D=k(w),b=C(),P=i("p"),M=k(g),y=C(),I=i("div"),N=i("div"),L=i("span"),L.textContent=B,F=C(),U=i("span"),q=k(J),K=k(" mi"),Z=C(),S=i("div"),j=i("span"),j.textContent=R,O=C(),u=i("span"),f=k(se),_=k(v),Q=k(" mi"),re=C(),$=i("div"),W=i("span"),W.textContent=ve,ne=C(),oe=i("span"),Ee=k(_e),je=C(),ie=i("div"),ee=i("div"),te=i("span"),Ae=k("Plan: "),ke=k(pe),Te=k(" → "),Ve=k(me),He=C(),ce=i("span"),Ce=k(ge),Ne=k(" mi/yr"),Se=C(),this.h()},l(z){e=o(z,"BUTTON",{class:!0,style:!0});var x=m(e);A&&A.l(x),s=V(x),a=o(x,"DIV",{class:!0});var le=m(a);ft(d.$$.fragment,le),h=V(le),n=o(le,"DIV",{class:!0});var de=m(n);p=o(de,"H3",{class:!0});var qe=m(p);D=E(qe,w),qe.forEach(r),b=V(de),P=o(de,"P",{class:!0});var Oe=m(P);M=E(Oe,g),Oe.forEach(r),y=V(de),I=o(de,"DIV",{class:!0});var fe=m(I);N=o(fe,"DIV",{class:!0});var ye=m(N);L=o(ye,"SPAN",{class:!0,"data-svelte-h":!0}),Y(L)!=="svelte-vj107q"&&(L.textContent=B),F=V(ye),U=o(ye,"SPAN",{class:!0});var Le=m(U);q=E(Le,J),K=E(Le," mi"),Le.forEach(r),ye.forEach(r),Z=V(fe),S=o(fe,"DIV",{class:!0});var De=m(S);j=o(De,"SPAN",{class:!0,"data-svelte-h":!0}),Y(j)!=="svelte-qozblt"&&(j.textContent=R),O=V(De),u=o(De,"SPAN",{class:!0});var Pe=m(u);f=E(Pe,se),_=E(Pe,v),Q=E(Pe," mi"),Pe.forEach(r),De.forEach(r),re=V(fe),$=o(fe,"DIV",{class:!0});var we=m($);W=o(we,"SPAN",{class:!0,"data-svelte-h":!0}),Y(W)!=="svelte-uo798a"&&(W.textContent=ve),ne=V(we),oe=o(we,"SPAN",{class:!0});var ze=m(oe);Ee=E(ze,_e),ze.forEach(r),we.forEach(r),fe.forEach(r),de.forEach(r),le.forEach(r),je=V(x),ie=o(x,"DIV",{class:!0});var Ge=m(ie);ee=o(Ge,"DIV",{class:!0});var Me=m(ee);te=o(Me,"SPAN",{});var be=m(te);Ae=E(be,"Plan: "),ke=E(be,pe),Te=E(be," → "),Ve=E(be,me),be.forEach(r),He=V(Me),ce=o(Me,"SPAN",{});var Be=m(ce);Ce=E(Be,ge),Ne=E(Be," mi/yr"),Be.forEach(r),Me.forEach(r),Ge.forEach(r),Se=V(x),x.forEach(r),this.h()},h(){c(p,"class","font-semibold text-lg text-carbon-100 truncate"),c(P,"class","text-sm text-carbon-500"),c(L,"class","text-carbon-400"),c(U,"class","font-mono text-carbon-100"),c(N,"class","flex justify-between text-sm"),c(j,"class","text-carbon-400"),c(u,"class",X="font-mono "+(l[6].delta<=0?"text-gauge-green":"text-gauge-red")),c(S,"class","flex justify-between text-sm"),c(W,"class","text-carbon-400"),c(oe,"class","font-mono text-carbon-100"),c($,"class","flex justify-between text-sm"),c(I,"class","mt-3 space-y-1"),c(n,"class","flex-1 min-w-0"),c(a,"class","flex items-start gap-4"),c(ee,"class","flex justify-between text-xs text-carbon-500"),c(ie,"class","mt-4 pt-4 border-t border-carbon-800"),c(e,"class","card-hover text-left animate-slide-up relative"),rt(e,"animation-delay",.1*(l[8]+3)+"s")},m(z,x){G(z,e,x),A&&A.m(e,null),t(e,s),t(e,a),dt(d,a,null),t(a,h),t(a,n),t(n,p),t(p,D),t(n,b),t(n,P),t(P,M),t(n,y),t(n,I),t(I,N),t(N,L),t(N,F),t(N,U),t(U,q),t(U,K),t(I,Z),t(I,S),t(S,j),t(S,O),t(S,u),t(u,f),t(u,_),t(u,Q),t(I,re),t(I,$),t($,W),t($,ne),t($,oe),t(oe,Ee),t(e,je),t(e,ie),t(ie,ee),t(ee,te),t(te,Ae),t(te,ke),t(te,Te),t(te,Ve),t(ee,He),t(ee,ce),t(ce,Ce),t(ce,Ne),t(e,Se),T=!0,$e||(Fe=nt(e,"click",et),$e=!0)},p(z,x){l=z,l[6].is_default?A||(A=We(),A.c(),A.m(e,s)):A&&(A.d(1),A=null);const le={};x&1&&(le.percent=l[6].percent_used),x&513&&(le.$$scope={dirty:x,ctx:l}),d.$set(le),(!T||x&1)&&w!==(w=(l[6].vehicle||l[6].id)+"")&&H(D,w),(!T||x&1)&&g!==(g=l[6].id+"")&&H(M,g),(!T||x&1)&&J!==(J=ue(l[6].latest_reading)+"")&&H(q,J),(!T||x&1)&&se!==(se=l[6].delta>0?"+":"")&&H(f,se),(!T||x&1)&&v!==(v=ue(Math.round(l[6].delta))+"")&&H(_,v),(!T||x&1&&X!==(X="font-mono "+(l[6].delta<=0?"text-gauge-green":"text-gauge-red")))&&c(u,"class",X),(!T||x&1)&&_e!==(_e=Je(l[6])+"")&&H(Ee,_e),(!T||x&1)&&pe!==(pe=Ie(l[6].plan_start)+"")&&H(ke,pe),(!T||x&1)&&me!==(me=Ie(l[6].plan_end)+"")&&H(Ve,me),(!T||x&1)&&ge!==(ge=ue(l[6].annual_allowance)+"")&&H(Ce,ge)},i(z){T||(he(d.$$.fragment,z),T=!0)},o(z){xe(d.$$.fragment,z),T=!1},d(z){z&&r(e),A&&A.d(),ct(d),$e=!1,Fe()}}}function Et(l){let e,s,a,d='<h1 class="text-3xl font-display font-bold text-carbon-100">Fleet Overview</h1> <p class="text-carbon-500 mt-2">Monitor all your vehicles at a glance</p>',h,n,p,w;const D=[bt,gt,mt,pt],b=[];function P(g,M){return g[1]?0:g[2]?1:g[0].length===0?2:3}return n=P(l),p=b[n]=D[n](l),{c(){e=C(),s=i("div"),a=i("header"),a.innerHTML=d,h=C(),p.c(),this.h()},l(g){lt("svelte-tnwkxa",document.head).forEach(r),e=V(g),s=o(g,"DIV",{class:!0});var y=m(s);a=o(y,"HEADER",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-1yqhp44"&&(a.innerHTML=d),h=V(y),p.l(y),y.forEach(r),this.h()},h(){document.title="Fleet | MileMinder",c(a,"class","mb-8 animate-fade-in"),c(s,"class","p-8")},m(g,M){G(g,e,M),G(g,s,M),t(s,a),t(s,h),b[n].m(s,null),w=!0},p(g,[M]){let y=n;n=P(g),n===y?b[n].p(g,M):(Ze(),xe(b[y],1,1,()=>{b[y]=null}),Xe(),p=b[n],p?p.p(g,M):(p=b[n]=D[n](g),p.c()),he(p,1),p.m(s,null))},i(g){w||(he(p),w=!0)},o(g){xe(p),w=!1},d(g){g&&(r(e),r(s)),b[n].d()}}}function Je(l){return`${l.years_left_term}y ${l.days_left_term}d`}const Ke=l=>l.delta<=0,Qe=l=>l.delta>0;function kt(l,e,s){let a=[],d=!0,h="";at(async()=>{await n()});async function n(){s(1,d=!0),s(2,h="");try{s(0,a=await ht())}catch(D){s(2,h=D instanceof Error?D.message:"Failed to load fleet")}finally{s(1,d=!1)}}async function p(D){try{await vt(D),window.location.href="/"}catch(b){s(2,h=b instanceof Error?b.message:"Failed to switch vehicle")}}return[a,d,h,p,D=>p(D.id)]}class wt extends ot{constructor(e){super(),it(this,e,kt,Et,tt,{})}}export{wt as component};
